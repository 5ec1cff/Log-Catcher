#!/system/bin/sh
case "$1" in 
  [0-9]*)
    dura=${1}
    ;;
  *)
    dura=60
    ;;
esac
lc_ver="v18"
lc_vercode=18
time=$(date +%Y-%m-%d-%H-%M-%S)
path=/data/local/catlog
file=$path/catlog-${time}-${dura}s.log
num=$(($RANDOM+100000000))
rand=$(($num%7))
android_sdk=`getprop ro.build.version.sdk`
build_desc=`getprop ro.build.description`
product=`getprop ro.build.product`
manufacturer=`getprop ro.product.manufacturer`
brand=`getprop ro.product.brand`
fingerprint=`getprop ro.build.fingerprint`
arch=`getprop ro.product.cpu.abi`
device=`getprop ro.product.device`
android=`getprop ro.build.version.release`
build=`getprop ro.build.id`
mkdir -p $path
echo "--------- beginning of head">>$file
echo "Log Catcher by MlgmXyysd">>$file
echo "Version: ${lc_ver} (${lc_vercode}) (Cat log)">>$file
echo "--------- beginning of system info">>$file
echo "Android version: ${android}">>$file
echo "Android sdk: ${android_sdk}">>$file
echo "Android build: ${build}">>$file
echo "Fingerprint: ${fingerprint}">>$file
echo "ROM build description: ${build_desc}">>$file
echo "Architecture: ${arch}">>$file
echo "Device: ${device}">>$file
echo "Manufacturer: ${manufacturer}">>$file
echo "Brand: ${brand}">>$file
echo "Product: ${product}">>$file
logcat -v long *:V logcatcher-catlog-mlgmxyysd:S>>$file &
sleep ${dura}s
pkill -f logcatcher-catlog-mlgmxyysd:S
